--PRUEBA DE LAS FUNCIONES DE LA TABLA TAB_PRUEBA ------------------------------------------------------------------------------------------------------------------------------------
SELECT * FROM TAB_MENSAJES;
SELECT * FROM TAB_MENSAJES WHERE id_mensaje BETWEEN 5000 AND 5999;
SELECT * FROM TAB_MENSAJES WHERE id_mensaje BETWEEN 1 AND 200;
SELECT * FROM TAB_MENSAJES WHERE id_mensaje = 200;

SELECT * FROM TAB_PRUEBA;
SELECT * FROM TAB_PRUEBA_PREGUNTAS;
SELECT * FROM TAB_PRUEBA_ESTUDIANTE;
SELECT now();

-- FUNCIONES DE LA TABLA TAB_PRUEBA
SELECT FUN_VALIDAR_DATOS_PRUEBA('PRUEBA1','DESCRIPCION PRUEBA 1');
SELECT FUN_INSERTAR_PRUEBA('PRUEBA1','DESCRIPCION PRUEBA 1');



SELECT FUN_INSERTAR_PRUEBA_GENERICA_JSON(
	'NOMBRE_PRUEBA',   --NOMBRE_PRUEBA
    'DESCRIPCION PRUEBA', --DESCRIPCION_PRUEBA
    'TIPO_PRUEBA', --TIPO_PRUEBA
    TIMESTAMP '2024-08-26 10:00:00', --FECHA_PRUEBA_INICIO
    TIMESTAMP '2024-08-27 10:00:00', --FECHA_PRUEBA_FIN
    25, --DURACION_PRUEBA_MINUTOS
    5,  --NUMERO_PREGUNTAS
    1  --ID_AREA_EVALUAR
);


SELECT FUN_INSERTAR_PRUEBA_GENERICA_TYT_JSON(
	'NOMBRE_PRUEBA',   --NOMBRE_PRUEBA
    'DESCRIPCION PRUEBA', --DESCRIPCION_PRUEBA
    'TIPO_PRUEBA', --TIPO_PRUEBA
    TIMESTAMP '2024-08-26 10:00:00', --FECHA_PRUEBA_INICIO
    TIMESTAMP '2024-08-27 10:00:00', --FECHA_PRUEBA_FIN
    25 --DURACION_PRUEBA_MINUTOS
);

SELECT FUN_OBTENER_PRUEBA_JSON(1);
SELECT FUN_OBTENER_PRUEBAS_JSON();

SELECT FUN_VINCULAR_ESTUDIANTES_A_PRUEBA(
    1, --ID_PRUEBA
    2560215 --ID_GRUPO
);
SELECT FUN_VINCULAR_ESTUDIANTE_A_PRUEBA(
    1, --ID_PRUEBA
    '2560215' --ID_ESTUDIANTE
);

SELECT FUN_OBTENER_PRUEBA_DATOS_PREVIEW_JSON(1);
SELECT FUN_OBTENER_ID_PREGUNTAS_PRUEBA_JSON(1);


SELECT FUN_OBTENER_PRUEBAS_ACTIVAS_ESTUDIANTE_JSON('1098818182');
SELECT * FROM TAB_PRUEBA_ESTUDIANTE WHERE ID_ESTUDIANTE='1098818182';

SELECT FUN_INSERTAR_PRUEBA_CUSTOMIZADA_JSON();


SELECT FUN_REGISTRAR_FECHA_INICIO_PRUEBA_ESTUDIANTE(7,'1098825376');
SELECT FUN_REGISTRAR_FECHA_FIN_PRUEBA_ESTUDIANTE(47,'555666');


SELECT FUN_REGISTRAR_RESPUESTA_PREGUNTA_ESTUDIANTE(
    40,
    '1098818182',
    '[{"idPregunta":12,"idOpcion":30},{"idPregunta":1,"idOpcion":3},{"idPregunta":10,"idOpcion":22},{"idPregunta":9,"idOpcion":17}]'::json
);

SELECT * FROM tab_prueba_respuestas_estudiante;

SELECT * FROM FUN_OBTENER_PRUEBA_PRESENTADA_ESTUDIANTE_RESULTADOS_JSON(42,'555666');


SELECT FUN_OBTENER_PRUEBAS_FINALIZADAS_JSON();

SELECT FUN_OBTENER_ANALISIS_PRUEBA_FINALIZADA_JSON(49);


--DROPEO DE TODOS LOS REGISTROS DE LA TABLA TAB_PRUEBA
DELETE FROM TAB_PRUEBA;
